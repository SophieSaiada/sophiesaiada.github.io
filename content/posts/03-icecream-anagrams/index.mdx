---
title: "×’×œ×™×“×•×ª ×•×× ×’×¨××•×ª"
urlName: "ice-cream-anagrams"
date: 2020-03-07
banner: ./banner.jpg
css: ./custom.css
tags:
- ××œ×’×•×¨×™×ª××™×
- Python
---

{/* Regex:       ([^\\^])\*([^*]+)\*       $1<span data-taste="$2">$2</span> */}

#### ×—×™×“×”:

×”×’×¢×ª×™ ×œ×—× ×•×ª ×’×œ×™×“×”, ××‘×œ ×›×™××” ×œ×—× ×•×ª ××—×™×“×ª ××œ×’×•×¨×™×ª××™×, ×”×—× ×•×ª ××ª× ×”×œ×ª ×‘×¦×•×¨×” ×§×¦×ª ××•×–×¨×”.
×”×§×•×¤××™ ××§×‘×œ ×”×–×× ×•×ª ×‘×¤×•×¨××˜ ×´×˜×¢×1, ×˜×¢×2, ...×´, ×›×©×™×ª×›×Ÿ ×©×˜×¢× ××—×“ ×–×”×” ×œ×˜×¢× ××—×¨,
×•××¢×‘×™×¨ ××•×ª×Ÿ ×œ××›×™×Ÿ ×”×’×œ×™×“×•×ª (×œ×”×œ×Ÿ ×”×’×œ×™×“××™).  
×¢×“ ×›××Ÿ ×“×™ ×¡×˜× ×“×¨×˜×™, ××‘×œ ×”× ×” ×‘× ×”×§××¥×³:
×”×’×œ×™×“××™ ×™×›×•×œ ×œ×”×¨×›×™×‘ ×’×œ×™×“×•×ª ×¨×§ ×‘×´××©×™×›×”×´ ××—×ª.  
×× ×™ ××ª×Ÿ ×“×•×’××”. × × ×™×— ×©×›×›×” × ×¨××” ×´×©×•×œ×—×Ÿ ×”×˜×¢××™××´ ×©×œ ×”×’×œ×™×“××™:

![×“×•×’××” ×œ×©×•×œ×—×Ÿ ×˜×¢××™×](./Fig1.jpg)

×”×’×œ×™×“××™ ×™×›×•×œ ×œ×”×›×™×Ÿ ××ª ×”×”×–×× ×” ×´<span data-taste="×¢× ×‘×™×">×¢× ×‘×™×</span>, <span data-taste="×§×¤×”">×§×¤×”</span>, <span data-taste="×•× ×™×œ">×•× ×™×œ</span>×´ (×•×›×œ ×¡×“×¨ ××—×¨ ×©×œ×”, ×›××• ×´<span data-taste="×§×¤×”">×§×¤×”</span>, <span data-taste="×•× ×™×œ">×•× ×™×œ</span>, <span data-taste="×¢× ×‘×™×">×¢× ×‘×™×</span>×´), ×›×™ ××œ×” 3 ×˜×¢××™× ×¡××•×›×™×.
 ××‘×œ ×”×”×–×× ×” ×´<span data-taste="×•× ×™×œ">×•× ×™×œ</span>, <span data-taste="××¡×˜×™×§">××¡×˜×™×§</span>, <span data-taste="×‘× × ×”">×‘× × ×”</span>×´  ×œ× ×‘×¨×ª-×‘×™×¦×•×¢, ×›×™ 3 ×”×˜×¢××™× ×”××œ×” ×œ× ×¡××•×›×™×.  
 ×”×”×–×× ×” ×´<span data-taste="×§×¤×”">×§×¤×”</span>, <span data-taste="×•× ×™×œ">×•× ×™×œ</span>, <span data-taste="×§×¤×”">×§×¤×”</span>, <span data-taste="××¡×˜×™×§">××¡×˜×™×§</span>×´ ×’× ××¤×©×¨×™×ª, ××‘×œ ×”×”×–×× ×” ×´<span data-taste="×•× ×™×œ">×•× ×™×œ</span>, <span data-taste="××¡×˜×™×§">××¡×˜×™×§</span>, <span data-taste="×§×¤×”">×§×¤×”</span>, <span data-taste="×•× ×™×œ">×•× ×™×œ</span>×´ ×œ×, ×›×™ ×‘×´×©×•×œ×—×Ÿ ×”×˜×¢××™××´ ××™×Ÿ ×§×˜×¢ ×‘××•×¨×š 4 ×˜×¢××™× ×©××›×™×œ ×¤×¢××™×™× ××ª ×”×˜×¢× <span data-taste="×•× ×™×œ">×•× ×™×œ</span>.

×”××˜×¨×” ×©×œ× ×• ×”×™× ×œ×™×™×¢×œ ××ª ×”×ª×”×œ×™×š, ×•×œ×‘× ×•×ª ××¢×¨×›×ª ×©×”×§×•×¤××™ ×™×•×›×œ ×œ×”×–×™×Ÿ ×œ×ª×•×›×” ×”×–×× ×”, ×•×œ×§×‘×œ ××™×“ ×ª×©×•×‘×” ×”×× ×”×”×–×× ×” ×‘×¨×ª-×‘×™×¦×•×¢ ××• ×œ×.

×‘×•××• × ×¡×ª×›×œ ×§×¦×ª ××—×¨×ª ×¢×œ ×”×—×™×“×”. ×‘××§×•× ×œ×”×¡×ª×›×œ ×¢×œ ×´×©×•×œ×—×Ÿ ×”×˜×¢××™××´ ×›×¨×©×™××” ×©×œ ×˜×¢××™×, × ×ª×¨×’× ××•×ª×• ×œ××—×¨×•×–×ª. ×‘××§×•× ×›×œ ×˜×¢×, ×™×•×¤×™×¢ ×”×ª×• ×”×¨××©×•×Ÿ ×‘×©× ×©×œ×•.
×™×¦× ×œ× ×• × ×—××“ ×›×™ ×›×œ ×˜×¢× ××ª×—×™×œ ×‘××•×ª ×™×—×•×“×™×ª, ××‘×œ ×§×œ ×œ×ª×¨×’× ××ª ×”×¤×ª×¨×•×Ÿ ×©×× ×™ ××¦×™×’ ×œ×¤×ª×¨×•×Ÿ ×©×¤×•×¢×œ ×¢×œ ×˜×¢××™× ×××© ×•×œ× ×¨×§ ×ª×•×•×™×.
×”××—×¨×•×–×ª ×©××ª××¨×ª ××ª ×”×©×•×œ×—×Ÿ ×©×‘×“×•×’××”, ×©× ×§×¨× ×œ×” ×‘×”××©×š `tastes`, ×”×™×:
```python noLineNumbers
tastes = "×‘×§××•×§×¢×ª"
```

×‘××•×ª×• ×”××•×¤×Ÿ × ×ª×™×™×—×¡ ×œ×”×–×× ×” ×›××—×¨×•×–×ª, ×•×”×”×–×× ×” ×´<span data-taste="×§×¤×”">×§×¤×”</span>, <span data-taste="×•× ×™×œ">×•× ×™×œ</span>, <span data-taste="×§×¤×”">×§×¤×”</span>, <span data-taste="××¡×˜×™×§">××¡×˜×™×§</span>×´ ×ª×ª×•×¨×’× ×œ××—×¨×•×–×ª:
```python noLineNumbers
order = "×§×•×§×"
```

×•×§×™×‘×œ× ×• ×—×™×“×” ×¢× × ×™×—×•×— ×¤×—×•×ª ××ª×•×§, ××‘×œ ×™×•×ª×¨ ×¤×©×•×˜×” ×œ×”×‘× ×”.
×× ×—× ×• ×¦×¨×™×›×™× ×œ×›×ª×•×‘ ××œ×’×•×¨×™×ª× ×©×‘×”×™× ×ª×Ÿ ×”××—×¨×•×–×•×ª `tastes` ×•-`order` ××—×–×™×¨ `true` ×× ×•×¨×§ ×× `order` ××• ×œ×¤×—×•×ª ××—×ª ××”×× ×’×¨××•×ª ×©×œ×” ××•×›×œ×•×ª ×‘-`tastes`.
××–×›×™×¨ (××• ××—×“×©) ×©×× ×’×¨××” ×©×œ ××™×œ×” $w$ ×”×™× ××™×œ×” ×—×“×©×” ×©× ×•×¦×¨×” ××©×™× ×•×™ ×¡×“×¨ ×”××•×ª×™×•×ª ×©×œ $w$.

×”×¤×ª×¨×•×Ÿ ×”-brute force×™ ×™×”×™×” ×œ×—×©×‘ ××ª ×›×œ ×”×¤×¨××•×˜×¦×™×•×ª (×©× ×›×•×œ×œ ×œ××™×œ×” ×”××§×•×¨×™×ª, ×•×”×× ×’×¨××•×ª ×©×œ×”) ×©×œ `order`
×•×¢×‘×•×¨ ×›×œ ××—×ª ××”×Ÿ ×œ×‘×“×•×§ ×× ×”×™× ××•×›×œ×ª ×‘-`tastes`. ××” ×”×¡×™×‘×•×›×™×•×ª ×©×œ ×”×¤×ª×¨×•×Ÿ ×”×–×”?
× ×¡××Ÿ ××ª ×”××•×¨×š ×©×œ `tastes` ×‘-$|tastes|$ ×•×©×œ `order` ×‘-$|order|$.
 ×”×‘×“×™×§×” ×”×× ×¤×¨××•×˜×¦×™×” ×¡×¤×¦×™×¤×™×ª ×©×œ `order` ××•×›×œ×ª ×‘-`tastes`, ×‘××™××•×© ×”× ×¤×•×¥, ×œ×•×§×—×ª $O(|tastes|*|order|)$.
×™×©× ×Ÿ $|tastes|!$ ×¤×¨××•×˜×¦×™×•×ª ×©×œ `order`. ×œ×›×Ÿ, ×”×¡×™×‘×•×›×™×•×ª ×©×œ ×”×¤×ª×¨×•×Ÿ ×”×™× $O((|tastes|*|order|)*|order|!)$, ××§×¡×¤×•× × ×¦×™××œ×™ ×•×œ× ××’× ×™×‘. ×× ×—× ×• ××¡×•×’×œ×™× ×œ×”×¨×‘×” ×™×•×ª×¨ ×˜×•×‘.


×œ×¦×•×¨×š ×”×¤×ª×¨×•×Ÿ × ×›×™×¨ ××ª ×”××•×©×’ ×´×”×™×¡×˜×•×’×¨××”×´. ×”×™×¡×˜×•×’×¨××” ×©×œ ××™×œ×” $w$ ×”×™× ×˜×‘×œ×” ×©× ×•×ª× ×ª ×œ×›×œ ×ª×• ×‘-$w$ ××ª ××¡×¤×¨ ×”×¤×¢××™× ×©×”×•× ××•×¤×™×¢ ×‘×”.

![×”×”×™×¡×˜×•×’×¨××” ×©×œ ×©×•×œ×—×Ÿ ×”×˜×¢××™×](./Fig2.jpg)

××” ×©×× ×—× ×• ×‘×¢×¦× ×¦×¨×™×›×™× ×œ×‘×“×•×§, ×–×” ×”×× ×§×™×™××ª ×‘-`tastes` ×ª×ª-××—×¨×•×–×ª ×‘××•×¨×š ×©×œ `order` ×©×”×”×™×¡×˜×•×’×¨××” ×©×œ×” ×©×•×•×” ×œ×”×™×¡×˜×•×’×¨××” ×©×œ `order` (×›×™ ×©×›×™×—×•×ª ×”×ª×•×•×™× ×©×œ ×›×œ ×”×× ×’×¨××•×ª ×©×œ ××™×œ×” × ×ª×•× ×”, ×–×”×” ×œ×©×›×™×—×•×ª ×”×ª×•×•×™× ×‘××™×œ×” ×”××§×•×¨×™×ª).

××– × ×›×ª×•×‘ ×§×•×“ ×©×¢×•×©×” ××ª ×–×” ×‘××•×¤×Ÿ ×”×›×™ ×¤×©×•×˜ ×‘×¢×•×œ×, ×¢×•×‘×¨ ×¢×œ ×›×œ ×ª×ª-××™×œ×” ×‘-`tastes` ×•××©×•×•×” ××ª ×”×”×™×¡×˜×•×’×¨××” ×©×œ×” ×œ×”×™×¡×˜×•×’×¨××” ×©×œ `order`.

```python
def histogram_of(word: str) -> Dict[str, int]:
    histogram = {}
    for char in word:
        histogram[char] = histogram.get(char, 0) + 1
    return histogram


def is_possible(tastes: str, order: str) -> bool:
    order_histogram = histogram_of(order)
    for substring_start_index in range(0, len(tastes) - len(order) + 1):
        substring = tastes[substring_start_index:substring_start_index + len(order)]
        if histogram_of(substring) == order_histogram:
            return True
    return False
```


×”×¡×™×‘×•×›×™×•×ª ×©×œ ×”×¤×¢×œ×” ××—×ª ×©×œ `histogramOf` ×”×™× $O(n)$ ×›×©-$n$ ×”×•× ××•×¨×š ×”××—×¨×•×–×ª `word`.
`isPossible` ×¢×•×‘×¨×ª ×¢×œ ×›×œ ×ª×ª×™-×”××—×¨×•×–×•×ª ×‘-`tastes` ×©×‘××•×¨×š ×©×œ `order`. 
×™×© ×¡×”×´×› $|tastes|-|order|$ ×ª×ª-××—×¨×•×–×•×ª ×›××œ×”, ×•×××—×¨ ×•×›×œ ××—×ª ××”×Ÿ ×‘××•×¨×š $|order|$, ×”×¡×™×‘×•×›×™×•×ª ×”×›×•×œ×œ×ª ×©×œ `isPossible` ×”×™× $O((|tastes|-|order|)*|order|)$, ×©×‘×¤×•×¢×œ ×©×•×•×” ×œ-$O(|tastes|*|order|)$ ×›×™ ×ª××™×“ ××ª×§×™×™×  $|tastes| \geq |order|$.
×–×” ×©×™×¤×•×¨ ××“×”×™× ××”×¤×ª×¨×•×Ÿ ×”×¨××©×•×Ÿ ×©×”×¦×’× ×•, ×¢×›×©×™×• ×–××Ÿ ×”×¨×™×¦×” ×›×‘×¨ ×œ× ××§×¡×¤×•× × ×¦×™××œ×™, ××‘×œ ×’× ×›××Ÿ, ×× ×—× ×• ××¡×•×’×œ×™× ×œ×™×•×ª×¨.

××– ×‘×•××• × ×‘×™×Ÿ ×‘×¢×¦× ××™×¤×” ×”××§×•× ×œ×©×™×¤×•×¨. ×× ×—× ×• ×›×Ÿ × ×”×™×” ×—×™×™×‘×™× ×œ×¡×¨×•×§ ××ª ×›×œ `tastes` ×‘×©×‘×™×œ ×œ×”×›×¨×™×– ×¢×œ ×”×ª×©×•×‘×” ×©×œ `isPossible`, ××‘×œ ×œ× ×‘×”×›×¨×— ×©× ×¦×˜×¨×š ×œ×‘× ×•×ª ×”×™×¡×˜×•×’×¨××” ×××¤×¡ ×œ×›×œ ×ª×ª-××™×œ×” ×—×“×©×”.  
× ×•×›×œ ×œ×‘× ×•×ª ×¨×§ ××ª ×”×”×™×¡×˜×•×’×¨××” ×œ×ª×ª-×”××—×¨×•×–×ª ×”×¨××©×•× ×”, ×•×‘××¢×‘×¨ ×œ×ª×ª-××—×¨×•×–×ª ×”×‘××” ×¨×§ ×œ×ª×§×Ÿ ××•×ª×” ×‘××•×ª ×”×—×“×©×” ×©× ×•×¡×¤×” (×œ×”×•×¡×™×£ ××—×“ ×œ×ª× ×©×œ×” ×‘×˜×‘×œ×”), ×•×”××•×ª ×”××—×¨×ª ×©×”×•×¦××” (×œ×—×¡×¨ ××—×“ ××”×ª× ×©×œ×” ×‘×˜×‘×œ×”).
×¢×“×›×•×Ÿ ×›×–×” ×©×œ ×”×”×™×¡×˜×•×’×¨××” ×§×•×¨×” ×‘-2 ×¤×¢×•×œ×•×ª, ×›×œ×•××¨, ×‘×–××Ÿ ×§×‘×•×¢!  
×”×”×¤×¢×œ×” ×ª×¨××” ×›×›×”:

![×”×“×’××” ×©×œ ××œ×’×•×¨×™×ª× ××¡×¤×¨ 2](./Fig3.jpg)

××‘×œ ×¢×“×™×™×Ÿ ×”×¡×™×‘×•×›×™×•×ª ×ª×™×©××¨ ××•×ª×” ×¡×™×‘×•×›×™×•×ª, ×›×™ ×œ×›×œ ×ª×ª-××—×¨×•×–×ª, ×× ×—× ×• ×¦×¨×™×›×™× ×œ×”×©×•×•×ª ×‘×™×Ÿ ×”×”×™×¡×˜×•×’×¨××” ×”× ×•×›×—×™×ª ×œ×”×™×¡×˜×•×’×¨××” ×©×œ `order`, ×•×–×” ×§×•×¨×” ×‘×¡×™×‘×•×›×™×•×ª ×œ×™× ××¨×™×ª ×‘×™×—×¡ ×œ××¡×¤×¨ ×”×¢×¨×›×™× ×‘×”×™×¡×˜×•×’×¨××” ×”×§×˜× ×” ××‘×™× ×™×”×Ÿ.

×”×¦×œ×—× ×• ×œ×”××™×¥ ××ª ×ª×”×œ×™×š ×‘× ×™×™×ª ×”×”×™×¡×˜×•×’×¨××” ×©×œ ×ª×ª-×”××™×œ×” ×”× ×•×›×—×™×ª. ×× ×—× ×• ×™×›×•×œ×™× ×œ×”××™×¥ ×’× ××ª ×”×‘×“×™×§×”.
×”×¢×¨×›×™× ×”×™×—×™×“×™× ×©××©×ª× ×™× ××©×œ×‘ ×œ×©×œ×‘, ×”× ×”×¢×¨×›×™× ×©×œ ×”××•×ª ×©× ×•×¡×¤×” ×•×”××•×ª ×©×—×•×¡×¨×”.
×× ×—× ×• ×™×›×•×œ×™× ×œ×©××•×¨ counter ×©×™×¡×¤×•×¨ ××ª ×›××•×ª ××•×ª×™×•×ª ×©×”×¢×¨×š ×©×œ×”×Ÿ ×‘×”×™×¡×˜×•×’×¨××” ×©×œ ×ª×ª-×”××—×¨×•×–×ª ×”× ×•×›×—×™×ª ×©×•×•×” ×œ×¢×¨×š ×©×œ×”×Ÿ ×‘×”×™×¡×˜×•×’×¨××” ×©×œ `order`.  
×× ×”××•×ª ×©×”×•×¦×× ×• ×¢×›×©×™×• ×”×¤×¨×” ××ª ×”××™×–×•×Ÿ, × ×—×¡×¨ ××”-counter ××—×“,
×× ×”×™× ×”×‘×™××” ×œ××™×–×•×Ÿ, × ×•×¡×™×£ ×œ×• ××—×“. ×›×›×” ×’× ×œ××•×ª ×”×—×“×©×” ×©× ×›× ×¡×” ×œ×´×—×œ×•×Ÿ×´ ×ª×ª-×”××—×¨×•×–×•×ª.
×× ×”-counter ×”×’×™×¢ ×œ××¡×¤×¨ ×”××•×ª×™×•×ª ×‘×”×™×¡×˜×•×’×¨××” ×©×œ `order`, ××¦×× ×• ×”×ª×××”, ×›×™ ×›×œ ×”××•×ª×™×•×ª ××ª××™××•×ª ×•×”×”×™×¡×˜×•×’×¨××•×ª ×–×”×•×ª!
× ×¨××” ××ª ×–×” ×‘×§×•×“:
```python
def is_possible(tastes: str, order: str) -> bool:
    order_histogram = histogram_of(order)
    total_num_of_chars = len(order_histogram.keys())

    order_len = len(order)
    tastes_len = len(tastes)

    substring_histogram = histogram_of(tastes[0:order_len])
    matching_chars = sum(
        1 if value == order_histogram.get(char) else 0
        for char, value in substring_histogram.items()
    )

    def update_char_in_histogram(char: str, offset: int):
        nonlocal matching_chars
        if substring_histogram.get(char) == order_histogram.get(char, 0):
            matching_chars -= 1
        substring_histogram[char] = substring_histogram.get(char, 0) + offset
        if substring_histogram[char] == order_histogram.get(char, 0):
            matching_chars += 1

    for substring_start_index in range(0, tastes_len - order_len + 1):
        if matching_chars == total_num_of_chars:
            return True

        if substring_start_index + order_len < tastes_len:
            new_letter = tastes[substring_start_index + order_len]
            update_char_in_histogram(new_letter, +1)
        dropped_letter = tastes[substring_start_index]
        update_char_in_histogram(dropped_letter, -1)

    return False
```

×”×§×•×“ ××“×‘×¨ ×‘×¢×“ ×¢×¦××•, ×¨×§ ×—×©×•×‘ ×œ×™ ×œ×¦×™×™×Ÿ ××” ×–×” ×”-`nonlocal` ×”××•×–×¨ ×”×–×” ×©× ××¦× ×‘×©×•×¨×” 15. ×‘×œ×™ ×”×©×•×¨×” ×”×–××ª, ×”×©×•×¨×•×ª 17 ×•-20, ×”×™×• ××ª×¤×¨×©×•×ª ×›-×´×ª×’×“×™×¨ ××©×ª× ×” ×—×“×© 
×‘×©× `matching_chars` ×•×ª×›× ×™×¡ ×œ×ª×•×›×• ××ª ×”×¢×¨×š ×©×œ `matching_chars` ×¤×—×•×ª/×•×¢×•×“
 1×´.
×–×” ×œ× ×‘×¡×“×¨ ××©×ª×™ ×¡×™×‘×•×ª. ×”×¨××©×•× ×” ×”×™× ×©×× ×—× ×• ×œ× ×¨×•×¦×™× ×œ×”×’×“×™×¨ ××©×ª× ×” ×—×“×©, ×× ×—× ×• ×¨×•×¦×™× ×œ×”×©×ª××© ×‘×–×” ×©×‘-scope ×”×—×™×¦×•× ×™ ×•×œ×¢×¨×•×š ××•×ª×•.
×”×¡×™×‘×” ×”×©× ×™×™×” ×”×™× ×©×–×” ×œ× ×™×ª×§××¤×œ. ×”×§×•××¤×™×™×œ×¨ (×›×Ÿ×›×Ÿ ×™×© ×§×•××¤×™×™×œ×¨ ×œ-Python) ×™×’×™×“ ×©×× ×—× ×• ×× ×¡×™× ×œ×§×‘×œ ××ª ×”×¢×¨×š ×©×œ `matching_chars` ×¢×•×“ ×œ×¤× ×™ ×©×”×’×“×¨× ×• ××•×ª×•, ×•×ª×—×ª ×”×”× ×—×” ×©×œ×• ×©×× ×—× ×• ××’×“×™×¨×™× ×‘×©×•×¨×” ×”×–××ª ××©×ª× ×” ×—×“×© â€“ ×”×•× ×××•×“ ×¦×•×“×§.  
×××” ×–×” × ×•×‘×¢? ××–×” ×©×œ×”×’×“×¨×ª ××©×ª× ×” ×—×“×©, ×•×œ×”×©××” ×œ×ª×•×š ××©×ª× ×” ×§×™×™× ×™×© syntax ×–×”×”. ×‘-Kotlin/Java, ×›×“×•×’××”, ×–×” ×œ× ×”×™×” ×§×•×¨×”.  
××– ×”×•×¡×¤× ×• ××ª ×”×©×•×¨×” ×©××•××¨×ª ×´×× ×—× ×• ××ª×›×•×•× ×™× ×œ××©×ª× ×” `matching_chars` ×”×§×™×™×, ×•×œ× ×œ××—×“ ×—×“×© ×œ×•×§××œ×™ ×©×™×›×•×œ×ª ×œ×—×©×•×‘ ×©×× ×—× ×• ×¨×•×¦×™× ×œ×™×¦×•×¨×´.

×•×¤×ª×¨× ×• ××ª ×”×—×™×“×”! ××• ×©×œ×? ××ª×—×‘× ×¤×” ×‘××’.  
×”××—×¨×•×–×ª `"b"` ×›×Ÿ ××•×¤×™×¢×” ×‘-`"ab"`. ××‘×œ ×”×¤×ª×¨×•×Ÿ ×©×œ× ×• ×™× ×™×‘ `False`.  
×œ×¢×•××ª ×–××ª, ×”××—×¨×•×–×ª `"cd"` ×œ× ××•×¤×™×¢×” ×‘- `"abc"`, ××‘×œ ×”×¤×ª×¨×•×Ÿ ×©×œ× ×• ×™× ×™×‘ `True`.

×œ××”? ××—×¨×™ ×›×œ ×¢×“×›×•×Ÿ ×©×œ `substring_histogram` ×•×©×œ ×”-counter, ×× ×—× ×• ××©×•×•×™× ××•×ª×• ×œ-`total_num_of_chars` ×‘××˜×¨×” ×œ×‘×“×•×§ ×× ×”×”×™×¡×˜×•×’×¨××” ×©×œ ×ª×ª-×”××—×¨×•×–×ª ×”× ×•×›×—×™×ª ×–×”×” ×œ×”×™×¡×˜×•×’×¨××” ×©×œ `order`.
×× ×—× ×• ××—×–×™×¨×™× `True` ×‘×¨×’×¢ ×©××¡×¤×¨ ×”×ª×•×•×™× ×©×”×¢×¨×š ×©×œ×”× ×‘-`substring_histogram` ×©×•×•×” ×œ×¢×¨×š ×©×œ×”× ×‘-`order_histogram` â€“ ×©×•×•×” ×œ××¡×¤×¨ ×”×ª×•×•×™× ×”×›×•×œ×œ ×‘-`order`.
×‘×“×•×’××” ×”×¨××©×•× ×”, ×× ×—× ×• ××ª×—×™×œ×™× ×¢× ×”×™×¡×˜×•×’×¨××” ×©×”×¢×¨×š ×”×™×—×™×“ ×‘×” ×”×•× `a=1`.
××—×¨×™ ×©×× ×—× ×• ××ª×§×“××™× ××•×ª ×™××™× ×”, ×× ×—× ×• ××—×¡×¨×™× 1 ××”×¢×¨×š ×©×œ `a`, ×•××– ×‘×××ª ×›××•×ª ×”-`a` ×‘-`substring_histogram` ×©×•×•×” ×œ×›××•×ª ×”-`a` ×‘-`order_histogram` (×‘×©×ª×™ ×”×”×™×¡×˜×•×’×¨××•×ª, ×”×¢×¨×š ×©×œ `a` ×”×•× `0`). ××– ×× ×—× ×• ××’×“×™×œ×™× ××ª ×”-counter.  
×‘××•×ª×” ×¤×¢×•×œ×” ×©×œ ×ª×–×•×–×ª ××•×ª ×™××™× ×”, ×× ×—× ×• ××•×¡×™×¤×™× 1 ×œ×¢×¨×š ×©×œ `b` ×‘-`substring_histogram`. ×’× ×¤×” ×”×¢×¨×š ×©×œ `b` ×–×”×” ×‘×©×ª×™ ×”×”×™×¡×˜×•×’×¨××•×ª, ××– × ×’×“×™×œ ×¢×•×“ ×¤×¢× ××ª ×”-counter.
×‘×©×œ×‘ ×”×–×”,×™×© 2 ×ª×•×•×™× ×‘-`substring_histogram` ×©×”×¢×¨×›×™× ×©×œ×”× ×–×”×™× ×œ×¢×¨×›×™× ×‘×”×™×¡×˜×•×’×¨××” ×©×œ `order`. ××‘×œ ×™×© ×¨×§ ××•×ª ××—×ª ×‘-`order`, ××– `total_num_of_chars`, ×©×©×•×•×” ×œ-1, ×œ× ×™×”×™×” ×©×•×•×” ×œ-counter.

××– ×”×™×™×ª×™ ×™×›×•×œ×” ×œ×‘×•× ×•×œ×”×’×™×“: ×´××– ×¤×©×•×˜ × ×‘×“×•×§ ×× `matching_chars` ×©×•×•×” **××• ×’×“×•×œ** ×-`total_num_of_chars`×´, ×•×–×” ×‘×××ª ×”×™×” ××ª×§×Ÿ ××ª ×”×ª×•×¦××” ×©×œ `is_possible("ab", "b")`.  
××‘×œ ×”×¤×ª×¨×•×Ÿ ×©×œ× ×• ×¢×“×™×™×Ÿ ×”×™×” ××•××¨ ×´×›×Ÿ, ××—×ª ×”×¤×¨××•×˜×¦×™×•×ª ×©×œ `"cd"` ××•×›×œ×ª ×‘-`"abc"`×´, ××” ×©×›××•×‘×Ÿ ×œ× × ×›×•×Ÿ.

×”×”×ª× ×”×’×•×ª ×”×–××ª ×§×•×¨×” ×›×™ ×× ×—× ×• ××ª×—×™×œ×™× ×¢× ×”×”×™×¡×˜×•×’×¨××” `a=1,b=1`. ×‘××¢×‘×¨ ×©×œ ××•×ª ×™××™× ×”, × ×—×¡×¨ ×-`a` 1, ×•× ×§×‘×œ ×©×¢×›×©×™×• ××¡×¤×¨ ×”-`a` ×‘×ª×ª-×”××—×¨×•×–×ª ×–×”×” ×œ××¡×¤×¨ ×”-`a` ×‘-`order` (`0` ×‘×©×ª×™×”×Ÿ), ×•×œ×›×Ÿ × ×’×“×™×œ ××ª `matching_chars`. ××—×¨×™ ×©× ×¢×“×›×Ÿ ×’× ××ª ×”×¢×¨×š ×©×œ `c`, × ×§×‘×œ ×©×’× ×¤×” ×”×¢×¨×›×™× ×©×œ ×”×ª×• ×‘×©×ª×™ ×”×”×”×™×¡×˜×•×’×¨××•×ª ×–×”×™×, ×•×œ×›×Ÿ × ×’×“×™×œ ×¢×•×“ ×¤×¢× ××ª `matching_chars`, ×©×¢×›×©×™×• ×©×•×•×” ×œ-2, ×‘×“×™×•×§ ×›××• ××¡×¤×¨ ×”×ª×•×•×™× ×‘-`order`. × ×›×•×Ÿ ×©×”×¢×¨×›×™× ×©×œ ×©× ×™ ×ª×•×•×™× ××ª××™××™×, ××‘×œ ×× ×—× ×• ×¦×¨×™×›×™× ×©×’× ×”×¢×¨×š ×©×œ `d` ×™×ª××™×.

× ×¤×ª×•×¨ ××ª ×–×” ×‘×¢×–×¨×ª ×ª×—×–×•×§×” ×©×œ ×”×¢×¨×š `total_num_of_chars`. ×‘×›×œ ×¤×¢× ×©× ×•×¡×™×£ ××•×ª ×—×“×©×” ×œ-`substring_histogram` × ×’×“×™×œ ××ª `total_num_of_chars`, ×•× ×“××’ ×©×’× ×”×¢×¨×š ×©×œ ×”××•×ª ×”×–×” ×™×‘×“×§.

×× ×—× ×• ×¦×¨×™×›×™× ×œ×©× ×•×ª ×›××” ×“×‘×¨×™×. ×‘×ª×•×¨ ×”×ª×—×œ×”, × ××ª×—×œ ××ª `substring_histogram` ×›×›×” ×©×™×›×™×œ `0` ×œ×›×œ ×ª×• ×©××•×¤×™×¢ ×‘-`order` ××‘×œ ×œ× ×‘×ª×ª-×”××—×¨×•×–×ª ×”×¨××©×•× ×” ×©×œ `tastes`. ××ª `total_num_of_chars` × ××ª×—×œ ×œ×”×™×•×ª ×›××•×ª ×”×ª×•×•×™× ×‘×”×’×“×¨×” ×”×—×“×©×” ×©×œ `substring_histogram`. ×•×”×©×™× ×•×™ ×”××—×¨×•×Ÿ, ×”×•× ×©×‘×›×œ ×¤×¢× ×©×× ×—× ×• ××•×¡×™×¤×™× ×œ-`substring_histogram` ×¢×¨×š ×—×“×©, × ×’×“×™×œ ××ª `total_num_of_chars` ×›×›×” ×©×™×›×™×œ ××ª ×”×’×•×“×œ ×”×—×“×© ×©×œ `substring_histogram`.  
×›×›×” ×™×¨××” ×”×§×•×“ ×”×—×“×©:
```python {7-11,19-21}
def is_possible(tastes: str, order: str) -> bool:
   order_histogram = histogram_of(order)

   order_len = len(order)
   tastes_len = len(tastes)

   substring_histogram = {
       **{char: 0 for char in order_histogram.keys()},
       **histogram_of(tastes[0:order_len])
   }
   total_num_of_chars = len(substring_histogram.keys())
   matching_chars = sum(
       1 if value == order_histogram.get(char) else 0
       for char, value in substring_histogram.items()
   )

   def update_char_in_histogram(char: str, offset: int):
       nonlocal matching_chars
       nonlocal total_num_of_chars
       if char not in substring_histogram: 
           total_num_of_chars += 1
       if substring_histogram.get(char) == order_histogram.get(char, 0):
           matching_chars -= 1
       substring_histogram[char] = substring_histogram.get(char, 0) + offset
       if substring_histogram[char] == order_histogram.get(char, 0):
           matching_chars += 1

   for substring_start_index in range(0, tastes_len - order_len + 1):
       if matching_chars == total_num_of_chars:
           return True

       if substring_start_index + order_len < tastes_len:
           new_letter = tastes[substring_start_index + order_len]
           update_char_in_histogram(new_letter, +1)
       dropped_letter = tastes[substring_start_index]
       update_char_in_histogram(dropped_letter, -1)

   return False
```
×× ×—× ×• ×¢×•×©×™× ×¤×” ×¢×‘×•×“×” ××™×•×ª×¨×ª. ×ª×›×•× ×” ××¢× ×™×™× ×ª ×•×œ× ×˜×¨×™×•×•×™××œ×™×ª ×©×™×© ×œ-dictionaries ×‘-Python ×”×™× ×©××¤×©×¨ ×œ×—×©×‘ ××ª ×”××•×¨×š ×©×œ×”× ×‘-$O(1)$. ×–×” ×§×•×¨×” ×‘××•×¤×Ÿ ×“×•××” ×œ××” ×©×›×ª×‘× ×• ××¤×•×¨×©×•×ª ×‘×§×•×“, ×œ×›×œ dict × ×©××¨ `size` ×©××ª×¢×“×›×Ÿ ×‘×”×•×¡×¤×” ×©×œ ×¢×¨×š ×—×“×©. ××– ×× ×—× ×• ×™×›×•×œ×™× ×œ×•×•×ª×¨ ×¢×œ `total_num_of_chars`, ×•×œ×”×©×ª××© ×‘-`len(substring_histogram)` ×‘××§×•×. ×›×›×” ×–×” ×™×¨××”:

```python {25}
def is_possible(tastes: str, order: str) -> bool:
    order_histogram = histogram_of(order)

    substring_histogram = {
        **{char: 0 for char in order_histogram.keys()},
        **histogram_of(tastes[0:len(order)])
    }
    matching_chars = sum(
        1 if value == order_histogram.get(char) else 0
        for char, value in substring_histogram.items()
    )

    def update_char_in_histogram(char: str, offset: int):
        nonlocal matching_chars
        if substring_histogram.get(char) == order_histogram.get(char, 0):
            matching_chars -= 1
        substring_histogram[char] = substring_histogram.get(char, 0) + offset
        if substring_histogram[char] == order_histogram.get(char, 0):
            matching_chars += 1

    for substring_start_index in range(0, len(tastes) - len(order) + 1):
        if matching_chars == len(substring_histogram):
            return True

        if substring_start_index + len(order) < len(tastes):
            new_letter = tastes[substring_start_index + len(order)]
            update_char_in_histogram(new_letter, +1)
        dropped_letter = tastes[substring_start_index]
        update_char_in_histogram(dropped_letter, -1)

    return False
```

×•×”×’×¢× ×• ×œ×¤×ª×¨×•×Ÿ ×©×™×¢×©×” ××ª ×”×’×œ×™×“××™ (××”×—×™×“×” ×”××§×•×¨×™×ª, ×œ××§×¨×” ×•×›×‘×¨ ×”×¡×¤×§×ª× ×œ×©×›×•×— ×¢×œ ××” ××“×•×‘×¨) ×”×¨×‘×” ×™×•×ª×¨ ×××•×©×¨! ğŸ¥³

<small>××‘×•×¡×¡ ×¢×œ ×”×—×™×“×” ×”<a href="https://leetcode.com/problems/permutation-in-string/">×–××ª</a>.</small>
